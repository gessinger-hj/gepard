<?xml version="1.0" encoding="UTF-8"?>
<project name="compile" default="compile">
  <target name="compile" depends="setSourceDir1, setSourceDir2, compileOnly, buildJar" />
  <target name="compileOnly" depends="editClassPath1, editClassPath2, excludeFiles" >
    <delete dir="${bin.dir}/org/"/>
    <delete file="${target.dir}/${jar.file}"/>
    <property name="class.files" value="**/*.class" />
    <javac debug="on" optimize="on"
			source="1.6"
			target="1.6"
      srcdir="${sourcedir}"
      destdir="${bin.dir}"
      classpath="${classpath}"
      includes="${source.files}"
      excludes="${exclude.files}"
    />
  </target>
  <target name="buildJar">
    <property name="main.class" value="" />
    <jar destfile="${target.dir}/${jar.file}" compress="true">
      <fileset dir="${bin.dir}" includes="${include.files} ${class.files}"/>
      <fileset dir="${source.dir}" includes="${include.files}"/>
      <manifest>
      	<attribute name="Main-Class" value="${main.class}"/>
        <attribute name="Built-By" value="${user.name}"/>
      	<attribute name="Build-Time" value="${build.time}"/>
      </manifest>
    </jar>
  </target>
  <target name="editClassPath1" if="add.classpath" >
    <property name="classpath" value="${default.classpath}:${add.classpath}" />
  </target>
  <target name="editClassPath2" unless="add.classpath" >
    <property name="classpath" value="${default.classpath}" />
  </target>
  <target name="excludeFiles" unless="exclude.files" >
    <property name="exclude.files" value="XXXX" />
  </target >
  <target name="setSourceDir1" if="add.source.dir" >
    <property name="sourcedir" value="${source.dir}:${add.source.dir}" />
  </target >
  <target name="setSourceDir2" unless="add.source.dir" >
    <property name="sourcedir" value="${source.dir}" />
  </target >
</project>
